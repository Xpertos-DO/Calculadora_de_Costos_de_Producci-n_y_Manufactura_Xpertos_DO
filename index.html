<!--
PROYECTO: Calculadora de Costos de Producción (Xpertos)
OBJETIVO: Herramienta gratuita para emprendedores: costos de materiales, electricidad, gas y tiempo.

Estructura de archivos (buenas prácticas):
- css/base.css               → Variables, tipografías, estilos base e inputs
- css/layout.css             → Estructura general (header, contenedor)
- css/components.css         → Cards, botones, resultado, toast, colapsables
- css/table-materiales.css   → Estilos responsive específicos de la tabla de Materiales
- css/responsive.css         → Ajustes responsive generales
- js/ui.js                   → Utilidades de interfaz (validación, toast, limpiar, copiar, colapsables)
- js/calculos.js             → Cálculos (electricidad, gas, mano de obra) + factores de conversión
- js/materiales.js           → CRUD de filas de Materiales y conversión de unidades
- js/main.js                 → Actualización del resumen global

Orden recomendado de CSS (respetar cascada):
1) base → 2) layout → 3) components → 4) table-materiales → 5) responsive

Orden recomendado de JS (dependencias):
1) ui.js → 2) materiales.js → 3) calculos.js → 4) main.js

Checklist de desarrollo:
- Mantener IDs/Clases del DOM si cambias estilos o estructura (los scripts dependen de ellos).
- Antes de refactorizar funciones, documentar inputs/outputs y actualizar comentarios.
- Probar en móvil (<600px) y escritorio (>1024px).
- Evitar dependencias externas para mantener compatibilidad con GitHub Pages.

-->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Conversión de unidades, costo Eléctrico, GLP y Mano de Obra" />
  <meta name="author" content="Xpertos" />
  <meta name="copyright" content="© Xpertos" />
  <meta name="theme-color" content="#7c3aed" />
  <meta name="color-scheme" content="dark light" />

  <title>Calculadora de Costos de Producción</title>

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect rx='14' width='64' height='64' fill='%237c3aed'/%3E%3Cpath d='M20 20 L44 44 M44 20 L20 44' stroke='white' stroke-width='6' stroke-linecap='round'/%3E%3C/svg%3E" />

  <!-- CSS (orden recomendado) -->
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/layout.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/table-materiales.css" />
  <link rel="stylesheet" href="css/responsive.css" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Calculadora de Costos de Producción - Xpertos">
  <meta property="og:description" content="Convierte unidades y calcula costos de Electricidad, GLP y Mano de Obra por lote o producto.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="es_DO">
  <meta property="og:image" content="assets/og-xpertos.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Calculadora de Costos de Producción - Xpertos">
  <meta name="twitter:description" content="Convierte unidades y calcula costos de Electricidad, GLP y Mano de Obra.">
  <meta name="twitter:image" content="assets/og-xpertos.png">
</head>
<body>


<header>
  <img src="img/xpertos_blanco.png" alt="Logo de Xpertos" />
  <h1>Calculadora de Costos de Producción</h1>
  <p>Conversión de unidades, costo Eléctrico, GLP y Mano de Obra </p>
</header>

<!-- ======================================
     FRANJA HORIZONTAL: Conecta / Descarga
     ====================================== -->
<nav class="social-strip" aria-label="Conecta y descarga Xpertos">
  <!-- Instagram -->
  <a class="chip ig" href="https://www.instagram.com/xpertos_do?igsh=MW01cHBvczljaHBmOA==" target="_blank" rel="noopener noreferrer" aria-label="Instagram @xpertos_do" title="Instagram @xpertos_do">
    <svg aria-hidden="true" viewBox="0 0 24 24" width="22" height="22">
      <rect x="2" y="2" width="20" height="20" rx="5" fill="currentColor" opacity="0.25"/>
      <circle cx="12" cy="12" r="4.5" stroke="currentColor" stroke-width="2" fill="none"/>
      <circle cx="17.5" cy="6.5" r="1.2" fill="currentColor"/>
    </svg>
    <span>@xpertos_do</span>
  </a>

  <!-- WhatsApp -->
  <a class="chip wa" href="https://wa.me/18495273305" target="_blank" rel="noopener noreferrer" aria-label="Escríbenos por WhatsApp" title="WhatsApp">
    <svg aria-hidden="true" viewBox="0 0 24 24" width="22" height="22">
      <path d="M20.5 3.5A10 10 0 0 0 3.3 16.8L2 22l5.4-1.4A10 10 0 1 0 20.5 3.5zM12 4a8 8 0 0 1 0 16 7.9 7.9 0 0 1-4.1-1.1l-.3-.2-3 .8.8-2.9-.2-.3A8 8 0 0 1 12 4zm4.5 10.7c-.2-.1-1.3-.6-1.4-.7s-.3-.1-.5.1c-.1.2-.6.7-.7.8-.1.1-.2.1-.4 0-1.2-.6-2.1-1.1-2.9-2-0.8-.9-1.3-1.8-1.9-3 0-.1 0-.2.1-.3l.6-.7c.1-.1.1-.2.1-.3s-.1-.2-.1-.3c0-.1-.5-1.2-.7-1.6-.2-.4-.4-.4-.6-.4h-.5c-.2 0-.3 0-.5.2-.2.2-.7.7-.7 1.7 0 1 .7 2 0.8 2.1 0 .1 1.3 2.3 3.2 3.9s3.8 2.3 3.9 2.4c.2.1 1.6.5 2.2.3.5-.1 1.2-.5 1.3-1 .1-.5.1-.9.1-1 0-.2-.2-.2-.4-.3z" fill="currentColor"/>
    </svg>
    <span>+1 849 527 3305</span>
  </a>

  <!-- Google Play -->
  <a class="chip play" href="https://play.google.com/store/apps/details?id=com.Xperto.Xperto" target="_blank" rel="noopener noreferrer" aria-label="Descargar en Google Play" title="Google Play">
    <svg aria-hidden="true" viewBox="0 0 24 24" width="22" height="22">
      <path d="M3 3l12.5 9L3 21z" fill="currentColor"/>
      <path d="M15.5 12L20.5 9.5a2 2 0 0 1 0 5L15.5 12z" fill="currentColor" opacity="0.6"/>
    </svg>
    <span>Google Play</span>
  </a>

  <!-- App Store -->
  <a class="chip appstore" href="https://apps.apple.com/do/app/xpertos/id6742215137" target="_blank" rel="noopener noreferrer" aria-label="Descargar en App Store" title="App Store">
    <svg aria-hidden="true" viewBox="0 0 24 24" width="22" height="22">
      <path d="M16.5 2.5c-1.3.1-2.8.9-3.6 2-0.8 1.1-1.2 2.6-1 4.1 1.5.1 3-.7 3.8-1.8.8-1.1 1.3-2.6 0.8-4.3zM20.8 17.3c-.5 1.1-1 2-1.7 2.9-.9 1.1-1.9 2.3-3.2 2.3-1.2 0-1.6-.8-3.1-.8-1.5 0-2 .8-3.2.8-1.3 0-2.2-1-3.1-2.1-1.7-2.1-3-5.8-1.2-8.3.8-1.1 2.2-1.9 3.6-1.9 1.4 0 2.4.8 3.1.8.7 0 2-.9 3.5-.8 0 0 2.6.2 3.8 2.2-2 .9-2.8 3.3-2.8 5 0 2 .9 3.8 2.3 4.7z" fill="currentColor"/>
    </svg>
    <span>App Store</span>
  </a>
</nav>


<main class="container" role="main">

  <!-- MATERIALES (Masa) -->
  <section class="card" id="card-materiales" aria-labelledby="materiales-title">
    <h3 id="materiales-title" class="collapse-btn" tabindex="0" role="button" aria-expanded="true" aria-controls="collapse-materiales"
        onclick="toggleCollapse('collapse-materiales')" onkeydown="if(event.key==='Enter'||event.key===' ')toggleCollapse('collapse-materiales')">
       Materiales 
    </h3>
    <div id="collapse-materiales" class="collapse-content show">

      <div id="contenedorMateriales">
    <table id="tablaMateriales" style="width:100%;border-collapse:collapse;">
    
          <thead>
            <tr style="color:var(--muted);text-align:left;">
              <th>Producto</th>
              <th>Cantidad compra</th>
              <th>Unidad compra</th>
              <th>Precio total</th>
              <th>Unidad transformación</th>
              <th>Cantidad equivalente</th>
              <th>Costo por unidad</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <button class="calc" type="button" onclick="agregarMaterial()">+ Agregar material</button>
      <div class="result" aria-live="polite" id="resultadoMateriales">
        <span class="result-text">Subtotal materiales: $0.00</span>
      </div>
    </div>
  </section>

  <!-- ELECTRICIDAD -->
  <section class="card" id="card-electricidad" aria-labelledby="electricidad-title">
    <h3 id="electricidad-title" class="collapse-btn" tabindex="0" role="button" aria-expanded="true" aria-controls="collapse-electricidad"
        onclick="toggleCollapse('collapse-electricidad')" onkeydown="if(event.key==='Enter'||event.key===' ')toggleCollapse('collapse-electricidad')">
       Electricidad
    </h3>
    <div id="collapse-electricidad" class="collapse-content show">
    <div class="table-responsive">
      <label for="potencia">Consumo del equipo (W/h)
      <input id="potencia" type="number" min="0" step="1" placeholder="Ej: Potencia que consume el equipo, en Watts 300 (ver etiqueta o manual)" aria-describedby="potenciaHelp" />
      </label>
      <label for="tiempoUsoElect">Duración de un lote (h)</label>
      <input id="tiempoUsoElect" type="number" min="0" step="0.01" placeholder="Tiempo que el equipo está encendido para producir un lote, en horas." aria-describedby="tiempoUsoElectHelp" />

      <label for="unidadesPorLoteElect">Unidades por lote</label>
      <input id="unidadesPorLoteElect" type="number" min="0" step="1" placeholder="Cantidad de lotes que produces en un mes." aria-describedby="unidadesPorLoteElectHelp" />

      <label for="precioKwh">Costo por kWh de electricidad</label>
      <input id="precioKwh" type="number" min="0" step="0.0001" placeholder="Precio por kWh según tu factura de electricidad." aria-describedby="precioKwhHelp" />
      </div>
      <div class="hint">Fórmula: (W × horas ÷ 1000 × costo kWh) ÷ unidades por lote</div>
      <button class="calc" type="button" onclick="calcularElectricidad()">Calcular Electricidad</button>
      <div class="result" aria-live="polite" id="resultadoElect">
        <span class="result-text"></span>
        <div class="button-group" style="display:none;">
          <button class="copy" type="button" aria-label="Copiar resultado" onclick="copiarResultado('resultadoElect')">Copiar</button>
          <button class="clear" type="button" aria-label="Limpiar sección" onclick="limpiarSeccion('electricidad')">Limpiar</button>
        </div>
      </div>
    </div>
  </section>

  <!-- GAS -->
  <section class="card" id="card-gas1" aria-labelledby="gas-title">
    <h3 id="gas-title" class="collapse-btn" tabindex="0" role="button" aria-expanded="true" aria-controls="collapse-gas1"
        onclick="toggleCollapse('collapse-gas1')" onkeydown="if(event.key==='Enter'||event.key===' ')toggleCollapse('collapse-gas1')">
       Gas (GLP)
    </h3>
    <div id="collapse-gas1" class="collapse-content show">
    <div class="table-responsive">
      <label for="btuPorGalon1">BTU por galón de GLP
      <input id="btuPorGalon1" type="number" min="0" step="1" value="91500" placeholder="Valor típico para cilindro de 91,500 BTU/gal." aria-describedby="btuPorGalonHelp" />
      </label>
      <label for="btuQuemador1">Potencia del quemador (BTU/h)</label>
      <select id="btuQuemador1" aria-describedby="btuQuemadorHelp">
        <option value="">-- Selecciona quemador --</option>
        <option value="5000">Pequeño: 5,000–8,000 BTU/h</option>
        <option value="9000">Mediano: 9,000–12,000 BTU/h</option>
        <option value="15000">Grande: 15,000–18,000 BTU/h</option>
      </select>

      <label for="tiempoUsoGas1">Tiempo de Uso por lote (h)</label>
      <input id="tiempoUsoGas1" type="number" min="0" step="0.01" placeholder="Tiempo que el quemador está encendido para un lote." aria-describedby="tiempoUsoGasHelp" />
      <label for="unidadesPorLoteGas1">Unidades por lote</label>
      <input id="unidadesPorLoteGas1" type="number" min="1" step="1" placeholder="Ej: 100" aria-describedby="unidadesPorLoteGasHelp" />

      <label for="precioGalon1">Costo por galón de GLP</label>
      <input id="precioGalon1" type="number" min="0" step="0.01" placeholder="Precio que pagas por rellenar o cambiar el cilindro." aria-describedby="precioGalonHelp" />
      </div>
      <div class="hint">Fórmula por lote: (BTU/h × horas ÷ BTU/gal) × costo/galón · por unidad: (resultado ÷ unidades por lote)</div>
      <button class="calc" type="button" onclick="calcularGas(1)">Calcular Gas</button>
      <div class="result" aria-live="polite" id="resultadoGas1">
        <span class="result-text"></span>
        <div class="button-group" style="display:none;">
          <button class="copy" type="button" aria-label="Copiar resultado" onclick="copiarResultado('resultadoGas1')">Copiar</button>
          <button class="clear" type="button" aria-label="Limpiar sección" onclick="limpiarSeccion('gas1')">Limpiar</button>
        </div>
      </div>
    </div>
  </section>

  <!-- TIEMPO -->
  <section class="card" id="card-tiempo" aria-labelledby="tiempo-title">
    <h3 id="tiempo-title" class="collapse-btn" tabindex="0" role="button" aria-expanded="true" aria-controls="collapse-tiempo"
        onclick="toggleCollapse('collapse-tiempo')" onkeydown="if(event.key==='Enter'||event.key===' ')toggleCollapse('collapse-tiempo')">
       Tiempo de trabajo
    </h3>
    <div id="collapse-tiempo" class="collapse-content show">
    <div class="table-responsive">
      <label for="tiempoLoteMin">Tiempo de producción por lote (min)
      <input id="tiempoLoteMin" type="number" min="0" step="0.1" placeholder="Incluye preparación, cocción y empaquetado." aria-describedby="tiempoLoteMinHelp" />
        </label>
      <label for="cantidadProductos">Unidades producidas por lote</label>
      <input id="cantidadProductos" type="number" min="1" step="1" placeholder="Cantidad de piezas o productos terminados en un lote." aria-describedby="cantidadProductosHelp" />

      <label for="salarioHora">Costo por hora de mano de obra</label>
      <input id="salarioHora" type="number" min="0" step="0.01" placeholder="Lo que te pagas a ti mismo o a un trabajador por hora." aria-describedby="salarioHoraHelp" />
      </div>
      <div class="hint">Fórmula por producto: (min ÷ 60 ÷ unidades) × costo/hora</div>
      <button class="calc" type="button" onclick="calcularTiempo()">Calcular Tiempo</button>
      <div class="result" aria-live="polite" id="resultadoTiempo">
        <span class="result-text"></span>
        <div class="button-group" style="display:none;">
          <button class="copy" type="button" aria-label="Copiar resultado" onclick="copiarResultado('resultadoTiempo')">Copiar</button>
          <button class="clear" type="button" aria-label="Limpiar sección" onclick="limpiarSeccion('tiempo')">Limpiar</button>
        </div>
      </div>
    </div>
  </section>

  <!-- RESUMEN -->
  <section class="card" id="card-resumen" aria-labelledby="resumen-title">
    <h3 id="resumen-title" class="collapse-btn" tabindex="0" role="button" aria-expanded="true" aria-controls="collapse-resumen"
        onclick="toggleCollapse('collapse-resumen')" onkeydown="if(event.key==='Enter'||event.key===' ')toggleCollapse('collapse-resumen')">
       Resumen de Subtotales
    </h3>
    <div id="collapse-resumen" class="collapse-content show">
  
      <table id="tablaResumen" style="width:100%;border-collapse:collapse;">
        <thead>
          <tr style="color:var(--muted);text-align:left;">
            <th>Concepto</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Materiales</td>
            <td id="subtotalMateriales">
              <div id="listaMateriales">Sin materiales calculados</div>
            </td>
          </tr>
          <tr>
            <td>Electricidad</td>
            <td id="subtotalElect">$0.00</td>
          </tr>
          <tr>
            <td>Gas</td>
            <td id="subtotalGas">$0.00</td>
          </tr>
          <tr>
            <td>Mano de obra</td>
            <td id="subtotalTiempo">$0.00</td>
          </tr>
          <tr style="font-weight:700; border-top:1px solid var(--stroke);">
            <td>Total</td>
            <td id="totalFinal">$0.00</td>
          </tr>
        </tbody>
      </table>
  
      <button class="calc" type="button" onclick="actualizarResumen()">Actualizar Resumen</button>
    </div>
  </section>

</main>

<!-- Notificación visual -->
<div id="toast" class="toast" role="status" aria-live="polite"></div>

<!-- Scripts -->
<script src="js/ui.js"></script>
<script src="js/materiales.js"></script>
<script src="js/calculos.js"></script>
<script src="js/main.js"></script>

</body>
  <footer class="site-footer" role="contentinfo">
    <div class="footer-inner">
      <p class="brand">Xpertos · Calculadora de Costos</p>

      <nav class="footer-links" aria-label="Legales y contacto">
        <a href="https://sites.google.com/d/1Q45jmqdfsZdkEaPguQhjhrVUjaOj3c4T/p/1O8wpPUFUt8acm4y9B9IzNZmqakgOGJVm/edit">Política de Privacidad</a>
        <span class="sep" aria-hidden="true">·</span>
        <a href="https://sites.google.com/d/17HWM5_dOvnyJA4s7HnYVR0PHRhScWYEV/p/14uoZPfeO4Tgoi7KPzYb87IU1_WKXJVfy/edit">Términos y Condiciones</a>
        <span class="sep" aria-hidden="true">·</span>
        <a href="mailto:xpertosappinfo@gmail.com">e-mail</a>
        <span class="sep" aria-hidden="true">·</span>
        <a href="https://wa.me/18495273305" target="_blank" rel="noopener">WhatsApp</a>
      </nav>

      <p class="copy">© <span id="year"></span> Xpertos. Todos los derechos reservados.</p>
    </div>
  </footer>

  <script>
    // Año automático
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Scripts de la app -->
  <script src="js/ui.js"></script>
  <script src="js/materiales.js"></script>
  <script src="js/calculos.js"></script>
  <script src="js/main.js"></script>
</body>
</html>